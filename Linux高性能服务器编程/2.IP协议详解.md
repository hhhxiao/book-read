### IP服务的特点

IP协议是TCP/IP协议族的动力,它为上层协议提供无状态、无连接、不可靠的服务

－　所有的IP数据报之间都是**相互独立,没有上下文关系**的，因此IP协议收发的数据包可能是**乱序**的．这样的优点就是简单高效

IP数据报的表示字段是用来处理IP数据报的分片问题而不是用来指示接受顺序．

#### `IPv4`数据报的头部结构

- 4位坂本号　对于`ipv4`来说值是４

- ４位头部长n　标识该`ip`头部的长度`m = n*32bit`

- 8位服务类型   [优先权字段　３bit]  [TOS字段　４bit] [0]

  `TOS`四位只能有一位为１,不同的位为１有不同的含义

- 16位总长度字段　整个ip数据报的长度单位字节

- 16位标识　是系统生成的随机值，同一个数据报的不同分片有相同的该值

- ３位标志段

  - 第一位保留
  - 第二位表示禁止分片，如果该位为１，就不会分片，超出部分直接丢弃
  - 第三位表示更多分片，置位说明它后面还有其他分片，因此分片数据报的最后一个分片该位是0,其它位是１

- 13位分片偏移，实际偏移是该值`*8`的结果，因此除去最后一个分片外所有的分段的长度都是８的整数倍

- ８位生存时间（TTL）,允许的路由器跳数，初始值是64，每到一个路由器该值减一．

- ８位协议　用来区分上层协议　TCP该值是6,UDP该值是17

- 16位头部校验和，由发送端填充

- 32位源`ip`和目的`ip`

- 可选信息　最多40字节

#### IP分片

 当IP数据报的长度超过帧的MTU时，IP数据报将会被分片传输，以太网帧的MTU是1500字节．能携带的数据最多是1480字节．



