> 对应CSAPP的CH5

### 优化编译器的能力和局限性

编译必须对程序使用足够安全的优化，也就是在**任何情况下，编译器的优化都不能影响程序的行为**。

```C
void XXX(int *a,int *b){
	*a += *b;
	*a += *b;
}
```

上面的代码中的两个`*a += *b`，编译器将不会把它们优化称`*a += 2* *b`,因为当`a`和`b`指向同一块内存的时候这两个表达式 表示的意义并不一样。

### 代码优化的策略
- 消除循环的低效率
- 减少过程调用
- 消除不必要的内存引用

### 理解现代处理器

#### 指令级并行

在现代的处理器中，多条指令是并行执行的。现代处理器会采用一些精细的机制来确保这种并行行为，正好获得机器级程序要求的语义模型。

**吞吐量界限（throughput bound）**刻画了处理器单元的原始计算能力，是程序性能的终极限制

#### 超标量

处理器可以每个时钟执行多个操作，而且是乱序的，整个超标量设计有两个部分：

- ICU 指令控制单元 从内存中读取指令序列并生成一组针对数据的基本操作（微操作）
- EU 执行单元，执行ICU生成的操作

##### 分支预测技术

在指令执行过程中遇到分支（条件跳转）的时候，处理器会猜测是否会选择分支，同时还会预测分支的目标地址

